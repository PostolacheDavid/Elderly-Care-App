#:kivy 2.3.0

ScreenManager:
    LoginScreen:
    MainScreen:

<LoginScreen>:
    name: "login"
    md_bg_color: 0.827, 0.827, 0.827, 1
    MDBoxLayout:
        orientation: "vertical"
        padding: "20dp"
        spacing: "30dp"
        pos_hint: {"center_x": 0.5, "center_y": 0.4}
        size_hint: (0.8, 0.6)

        MDLabel:
            text: "Elderly Care App"
            font_style: "H3"
            font_name: "assets/fonts/DancingScript-VariableFont_wght.ttf"
            halign: "center"
            padding: [0, 0, 0, 300]
            theme_text_color: "Custom"
            text_color: 120/255, 190/255, 220/255

        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 0.8
            pos_hint: {"center_x":0.5}

            MDIcon:
                icon: "assets/icons/account.png"
                size_hint_x: None
                width: "40dp"
                pos_hint: {"center_y":1.6}

            MDBoxLayout:
                orientation: "vertical"
                size_hint_x: 0.8
                pos_hint: {"center_x": 0.5}
                spacing: "0dp"

                MDLabel:
                    id: helper_label
                    text: "Enter username"
                    theme_text_color: "Hint"
                    font_style: "Caption"
                    size_hint_y: None
                    height: self.texture_size[1]

                MDTextField:
                    id: username
                    mode: "fill"

        Widget:
            size_hint_y: None
            height: "20dp"

        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 0.8
            pos_hint: {"center_x":0.5}

            MDIcon:
                icon: "assets/icons/lock.png"
                size_hint_x: None
                width: "40dp"
                pos_hint: {"center_y":1.6}

            MDBoxLayout:
                orientation: "vertical"
                size_hint_x: 0.8
                pos_hint: {"center_x": 0.5}
                spacing: "0dp"

                MDLabel:
                    id: helper_label_pass
                    text: "Enter password"
                    theme_text_color: "Hint"
                    font_style: "Caption"
                    size_hint_y: None
                    height: self.texture_size[1]

                MDTextField:
                    id: password
                    password: True
                    hint_text: ""
                    mode: "fill"

        MDLabel:
            id: login_status
            text: ""
            theme_text_color: "Custom"
            text_color: 1, 0, 0, 1
            halign: "center"
        MDRaisedButton:
            text: "Login"
            pos_hint: {"center_x": 0.5}
            size_hint_x: 0.8
            on_release: root.login()
        MDLabel:
            text: "[ref=link]Forgot Password?[/ref]"
            markup: True
            theme_text_color: "Custom"
            text_color: 120/255, 190/255, 220/255
            halign: "center"
            on_ref_press: root.forgot_password()

<MainScreen>:
    name: "main"
    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            md_bg_color: 0.827, 0.827, 0.827, 1

            # Left custom icon
            AnchorLayout:
                anchor_x: 'left'
                anchor_y: 'center'

                MDIconButton:
                    icon: "assets/icons/menu.png"
                    icon_size: "48sp"
                    on_release: app.on_menu_click()

            # Right custom icon
            AnchorLayout:
                anchor_x: 'right'
                anchor_y: 'bottom'

                MDIconButton:
                    icon: "assets/icons/magnify.png"
                    icon_size: "36sp"
                    theme_icon_color: "Custom"
                    icon_color: 1, 1, 1, 1
                    on_release: app.on_magnify_click()

        ScreenManager:
            id: content_manager

            Screen:
                name: "account"
                MDBoxLayout:
                    pos_hint:{'center_x':0.5, 'center_y':0.5}
                    orientation:'vertical'
                    size_hint_y: 0.4
                    size_hint_x: 0.4
                    spacing: "40dp"
                    MDLabel:
                        text: "Welcome to the Account Screen!"
                        halign: "center"

            Screen:
                name: "health"
                ScrollView:
                    bar_width:0
                    MDBoxLayout:
                        orientation:'vertical'
                        adaptive_height:True
                        spacing:'20dp'
                        padding:'20dp'
                        MDLabel:
                            text:'CATEGORIES'
                            font_style:"Subtitle2"
                        MDGridLayout:
                            cols:2
                            adaptive_height:True
                            size_hint_y: None
                            height: self.minimum_height 
                            spacing:'15dp'
                            GridCard:
                                source:"assets/icons/pill.png"
                                text:"Medicine"
                            GridCard:
                                source:"assets/icons/nurse.png"
                                text:"Appointments"
                            GridCard:
                                source:"assets/icons/medical_data.png"
                                text:"Medical Data"
                            GridCard:
                                source:"assets/icons/fitness.png"
                                text:"Fitness"
                            GridCard:
                                source:"assets/icons/notification.png"
                                text:"Notifications"
                            GridCard:
                                source:"assets/icons/chat.png"
                                text:"Chat"

            Screen:
                name: "emergency"
                MDBoxLayout:
                    pos_hint:{'center_x':0.5, 'center_y':0.5}
                    orientation:'vertical'
                    size_hint_y: 0.4
                    size_hint_x: 0.4
                    spacing: "40dp"
                    MDLabel:
                        text: "Welcome to the Emergency Screen!"
                        halign: "center"


        MDBottomNavigation:
            MDBottomNavigationItem:
                name:"Account Screen"
                text:"Account"
                icon:"assets/icons/account.png"
                on_tab_press: content_manager.current = "account"
                   
            MDBottomNavigationItem:
                name:"Health Screen"
                text:"Health"
                icon:"assets/icons/health.png"
                on_tab_press: content_manager.current = "health"
                    
            MDBottomNavigationItem:
                name:"Emergency Screen"
                text:"Emergency"
                icon:"assets/icons/emergency.png"
                on_tab_press: content_manager.current = "emergency"
                    

<GridCard@MDCard>:
    ripple_behavior:True
    orientation:'vertical'
    source:''
    radius:25
    folder_size:''
    text:''
    padding:'20dp'
    spacing:'20dp'
    size_hint_y:None
    height:'150dp'
    elevation: 1
    Image:
        source:root.source
    MDBoxLayout:
        orientation:'vertical'
        adaptive_height:True
        MDLabel:
            text:root.text
            adaptive_height:True
            halign:'center'
