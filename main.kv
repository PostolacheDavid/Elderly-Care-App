#:kivy 2.3.0

ScreenManager:
    LoginScreen:
    MainScreen:
    DoctorRegisterScreen:

<LoginScreen>:
    name: "login"
    md_bg_color: 0.827, 0.827, 0.827, 1
    MDBoxLayout:
        orientation: "vertical"
        padding: "20dp"
        spacing: "30dp"
        pos_hint: {"center_x": 0.5, "center_y": 0.4}
        size_hint: (0.8, 0.6)

        MDLabel:
            text: "Elderly Care App"
            font_style: "H3"
            font_name: "assets/fonts/DancingScript-VariableFont_wght.ttf"
            halign: "center"
            padding: [0, 0, 0, 300]
            theme_text_color: "Custom"
            text_color: 120/255, 190/255, 220/255

        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 0.8
            pos_hint: {"center_x":0.5}

            MDIcon:
                icon: "assets/icons/account.png"
                size_hint_x: None
                width: "40dp"
                pos_hint: {"center_y":1.6}

            MDBoxLayout:
                orientation: "vertical"
                size_hint_x: 0.8
                pos_hint: {"center_x": 0.5}
                spacing: "0dp"

                MDLabel:
                    id: helper_label
                    text: "Enter username"
                    theme_text_color: "Hint"
                    font_style: "Caption"
                    size_hint_y: None
                    height: self.texture_size[1]

                MDTextField:
                    id: username
                    mode: "fill"

        Widget:
            size_hint_y: None
            height: "20dp"

        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 0.8
            pos_hint: {"center_x":0.5}

            MDIcon:
                icon: "assets/icons/lock.png"
                size_hint_x: None
                width: "40dp"
                pos_hint: {"center_y":1.6}

            MDBoxLayout:
                orientation: "vertical"
                size_hint_x: 0.8
                pos_hint: {"center_x": 0.5}
                spacing: "0dp"

                MDLabel:
                    id: helper_label_pass
                    text: "Enter password"
                    theme_text_color: "Hint"
                    font_style: "Caption"
                    size_hint_y: None
                    height: self.texture_size[1]

                MDTextField:
                    id: password
                    password: True
                    hint_text: ""
                    mode: "fill"

        MDLabel:
            id: login_status
            text: ""
            theme_text_color: "Custom"
            text_color: 1, 0, 0, 1
            halign: "center"
        MDRaisedButton:
            text: "Login"
            pos_hint: {"center_x": 0.5}
            size_hint_x: 0.8
            on_release: root.login()
        MDLabel:
            text: "[ref=link]Forgot Password?[/ref]"
            markup: True
            theme_text_color: "Custom"
            text_color: 120/255, 190/255, 220/255
            halign: "center"
            on_ref_press: root.forgot_password()
        MDLabel:
            text: "[ref=link]Don't have an account?[/ref]"
            markup: True
            theme_text_color: "Custom"
            text_color: 120/255, 190/255, 220/255
            halign: "center"
            on_ref_press: app.root.current = "doctor_register"

<DoctorRegisterScreen>:
    name: "doctor_register"
    md_bg_color: 0.827, 0.827, 0.827, 1

    MDFlatButton:
        text: "<- Back"
        halign: "left"
        on_release:
            app.root.current = "login"

    MDBoxLayout:
        orientation: "vertical"
        spacing: "20dp"
        size_hint_x: 0.8
        size_hint_y: None
        height: self.minimum_height
        pos_hint: {"center_x": 0.5, "center_y": 0.5}

        MDLabel:
            text: "Create Doctor Account"
            font_style: "H5"
            halign: "center"
            theme_text_color: "Custom"
            text_color: 120/255, 190/255, 220/255
            size_hint_y: None
            height: self.texture_size[1]

        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 1
            pos_hint: {"center_x": 0.5}
            size_hint_y: None
            height: "60dp"

            MDLabel:
                text: "Full Name"
                size_hint_x: 0.4
                halign: "right"
                valign: "middle"
                theme_text_color: "Primary"
                size_hint_y: None
                height: self.texture_size[1]
                pos_hint: {"center_y": 0.4}

            MDTextField:
                id: username
                mode: "fill"
                size_hint_x: 0.6
        
        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 1
            pos_hint: {"center_x": 0.5}
            size_hint_y: None
            height: "60dp"

            MDLabel:
                text: "E-Mail"
                size_hint_x: 0.4
                halign: "right"
                valign: "middle"
                theme_text_color: "Primary"
                size_hint_y: None
                height: self.texture_size[1]
                pos_hint: {"center_y": 0.4}

            MDTextField:
                id: email
                mode: "fill"
                size_hint_x: 0.6

        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 1
            pos_hint: {"center_x": 0.5}
            size_hint_y: None
            height: "60dp"

            MDLabel:
                text: "Password"
                size_hint_x: 0.4
                halign: "right"
                valign: "middle"
                theme_text_color: "Primary"
                size_hint_y: None
                height: self.texture_size[1]
                pos_hint: {"center_y": 0.4}

            MDTextField:
                id: password
                password: True
                mode: "fill"
                size_hint_x: 0.6

        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 1
            pos_hint: {"center_x": 0.5}
            size_hint_y: None
            height: "60dp"

            MDLabel:
                text: "Type Password Again"
                size_hint_x: 0.4
                halign: "right"
                valign: "middle"
                theme_text_color: "Primary"
                size_hint_y: None
                height: self.texture_size[1]
                pos_hint: {"center_y": 0.4}

            MDTextField:
                id: rewrite_password
                password: True
                mode: "fill"
                size_hint_x: 0.6
        
        MDBoxLayout:
            orientation: "horizontal"
            spacing: "20dp"
            size_hint_x: 1
            pos_hint: {"center_x": 0.5}
            size_hint_y: None
            height: "60dp"

            MDLabel:
                text: "Degree"
                size_hint_x: 0.4
                halign: "right"
                valign: "middle"
                theme_text_color: "Primary"
                size_hint_y: None
                height: self.texture_size[1]
                pos_hint: {"center_y": 0.4}

            MDRaisedButton:
                text: "Upload Photo"
                pos_hint: {"center_x": 0.5}
                on_release: root.open_file_chooser()
                


<MainScreen>:
    name: "main"

    MDNavigationLayout:

        ScreenManager:
            id: screen_manager

            Screen:

                MDBoxLayout:
                    orientation: 'vertical'

                    MDTopAppBar:
                        md_bg_color: 0.827, 0.827, 0.827, 1

                        # Left custom icon
                        AnchorLayout:
                            anchor_x: 'left'
                            anchor_y: 'center'

                            MDIconButton:
                                icon: "assets/icons/menu.png"
                                icon_size: "48sp"
                                on_release: nav_drawer.set_state("toggle")

                        # Right custom icon
                        AnchorLayout:
                            anchor_x: 'right'
                            anchor_y: 'bottom'

                            MDIconButton:
                                icon: "assets/icons/magnify.png"
                                icon_size: "36sp"
                                theme_icon_color: "Custom"
                                icon_color: 1, 1, 1, 1
                                #on_release: app.on_magnify_click()

                    MDBottomNavigation:
                        panel_color: 0.827, 0.827, 0.827, 1
                        MDBottomNavigationItem: #Butonul pentru account
                            name:"Account Screen"
                            text:"Account"
                            icon:"assets/icons/account.png"
                            MDScreen: #Ecran pentru atunci cand apesi butonul
                                MDBoxLayout:
                                    pos_hint:{'center_x':0.5, 'center_y':0.5}
                                    orientation:'vertical'
                                    size_hint_y: 0.4
                                    size_hint_x: 0.4
                                    spacing: "40dp"
                                    MDLabel:
                                        text: "Welcome to the Account Screen!"
                                        halign: "center"
                        MDBottomNavigationItem:
                            name:"Health Screen"
                            text:"Health"
                            icon:"assets/icons/health.png"
                            MDScreen: #Ecran pentru atunci cand apesi butonul
                                ScreenManager:
                                    id: health_manager

                                    Screen:
                                        name: "doctor_health"
                                        ScrollView:
                                            bar_width:0
                                            MDBoxLayout:
                                                orientation:'vertical'
                                                adaptive_height:True
                                                spacing:'20dp'
                                                padding:'20dp'
                                                MDLabel:
                                                    text:"Doctor's Health Dashboard"
                                                    font_style:"Subtitle2"
                                                MDGridLayout:
                                                    cols:2
                                                    adaptive_height:True
                                                    size_hint_y: None
                                                    height: self.minimum_height 
                                                    spacing:'15dp'
                                                    GridCard:
                                                        source:"assets/icons/pill.png"
                                                        text:"Pacients Medicine"

                                    Screen:
                                        name: "elder_health"
                                        ScrollView:
                                            bar_width:0
                                            MDBoxLayout:
                                                orientation:'vertical'
                                                adaptive_height:True
                                                spacing:'20dp'
                                                padding:'20dp'
                                                MDLabel:
                                                    text:"Elder's Health Dashboard"
                                                    font_style:"Subtitle2"
                                                MDGridLayout:
                                                    cols:2
                                                    adaptive_height:True
                                                    size_hint_y: None
                                                    height: self.minimum_height 
                                                    spacing:'15dp'
                                                    GridCard:
                                                        source:"assets/icons/pill.png"
                                                        text:"Medicine"
                                                    GridCard:
                                                        source:"assets/icons/nurse.png"
                                                        text:"Appointments"
                                                    GridCard:
                                                        source:"assets/icons/medical_data.png"
                                                        text:"Medical Data"
                                                    GridCard:
                                                        source:"assets/icons/fitness.png"
                                                        text:"Fitness"
                                                    GridCard:
                                                        source:"assets/icons/notification.png"
                                                        text:"Notifications"
                                                    GridCard:
                                                        source:"assets/icons/chat.png"
                                                        text:"Chat"

                                    Screen:
                                        name: "caregiver_health"
                                        ScrollView:
                                            bar_width:0
                                            MDBoxLayout:
                                                orientation:'vertical'
                                                adaptive_height:True
                                                spacing:'20dp'
                                                padding:'20dp'
                                                MDLabel:
                                                    text:"Elder's Health Dashboard"
                                                    font_style:"Subtitle2"
                                                MDGridLayout:
                                                    cols:2
                                                    adaptive_height:True
                                                    size_hint_y: None
                                                    height: self.minimum_height 
                                                    spacing:'15dp'


                        MDBottomNavigationItem:
                            name:"Emergency Screen"
                            text:"Emergency"
                            icon:"assets/icons/emergency.png"
                            MDScreen: #Ecran pentru atunci cand apesi butonul
                                MDBoxLayout:
                                    pos_hint:{'center_x':0.5, 'center_y':0.5}
                                    orientation:'vertical'
                                    size_hint_y: 0.4
                                    size_hint_x: 0.4
                                    spacing: "40dp"
                                    MDLabel:
                                        text: "Welcome to the Emergency Screen!"
                                        halign: "center"
        
        MDNavigationDrawer:
            id: nav_drawer
            radius: [0, 40, 40, 0]
            md_bg_color: 0.95, 0.95, 0.95, 1

            MDBoxLayout:
                orientation: "vertical"
                padding: "20dp"
                spacing: "15dp"

                MDLabel:
                    text: "Menu"
                    theme_text_color: "Custom"
                    text_color: 120/255, 190/255, 220/255
                    font_style: "H6"
                    size_hint_y: None
                    height: self.texture_size[1]
                
                MDSeparator:
                    height: "4dp"

                Widget:
                    size_hint_y: 1
            
                
                MDFlatButton:
                    text: "Home"
                    on_release:
                        app.close_drawer()

                MDSeparator:
                    height: "1dp"
                
                MDFlatButton:
                    text: "Logout"
                    on_release:
                        app.show_logout_dialog()

<GridCard@MDCard>:
    ripple_behavior:True
    orientation:'vertical'
    source:''
    radius:25
    folder_size:''
    text:''
    padding:'20dp'
    spacing:'20dp'
    size_hint_y:None
    height:'150dp'
    elevation: 1
    Image:
        source:root.source
    MDBoxLayout:
        orientation:'vertical'
        adaptive_height:True
        MDLabel:
            text:root.text
            adaptive_height:True
            halign:'center'
